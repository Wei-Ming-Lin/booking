@tailwind base;
@tailwind components;
@tailwind utilities;

/* 匯入 Google Fonts */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Noto+Sans+TC:wght@300;400;500;600;700&display=swap');

@layer base {
  /* 蘋果風格字體設定 */
  html {
    font-family: 'Inter', 'SF Pro Display', 'Helvetica Neue', 'PingFang TC', 'Noto Sans TC', 'Microsoft JhengHei', sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    scroll-behavior: smooth;
  }

  body {
    font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
    letter-spacing: -0.011em;
  }
}

@layer utilities {
  /* 文字裁切工具 */
  .line-clamp-1 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 1;
  }
  
  .line-clamp-2 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 2;
  }

  .line-clamp-3 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 3;
  }

  /* 蘋果液態玻璃效果 */
  .liquid-glass {
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    background: rgba(255, 255, 255, 0.72);
    border: 1px solid rgba(255, 255, 255, 0.18);
    box-shadow: 
      0 8px 32px rgba(31, 38, 135, 0.37),
      inset 0 1px 0 rgba(255, 255, 255, 0.5),
      inset 0 -1px 0 rgba(255, 255, 255, 0.2);
  }

  .dark .liquid-glass {
    background: rgba(15, 23, 42, 0.8);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 
      0 8px 32px rgba(0, 0, 0, 0.4),
      inset 0 1px 0 rgba(255, 255, 255, 0.1),
      inset 0 -1px 0 rgba(255, 255, 255, 0.05);
  }

  /* 液態流動動畫背景 */
  .liquid-bg::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      45deg,
      rgba(59, 130, 246, 0.1) 0%,
      rgba(147, 51, 234, 0.1) 25%,
      rgba(236, 72, 153, 0.1) 50%,
      rgba(251, 191, 36, 0.1) 75%,
      rgba(59, 130, 246, 0.1) 100%
    );
    background-size: 400% 400%;
    animation: liquid-gradient 8s ease infinite;
    border-radius: inherit;
    z-index: -1;
  }

  @keyframes liquid-gradient {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  /* 毛玻璃懸停效果 */
  .glass-hover {
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .glass-hover:hover {
    backdrop-filter: blur(25px) saturate(200%);
    -webkit-backdrop-filter: blur(25px) saturate(200%);
    transform: translateY(-2px) scale(1.02);
    box-shadow: 
      0 20px 50px rgba(31, 38, 135, 0.5),
      inset 0 1px 0 rgba(255, 255, 255, 0.6),
      inset 0 -1px 0 rgba(255, 255, 255, 0.3);
  }

  .dark .glass-hover:hover {
    box-shadow: 
      0 20px 50px rgba(0, 0, 0, 0.6),
      inset 0 1px 0 rgba(255, 255, 255, 0.15),
      inset 0 -1px 0 rgba(255, 255, 255, 0.08);
  }

  /* 登入頁面背景網格樣式 */
  .bg-grid-pattern {
    background-image: 
      linear-gradient(rgba(59, 130, 246, 0.05) 1px, transparent 1px),
      linear-gradient(90deg, rgba(59, 130, 246, 0.05) 1px, transparent 1px);
    background-size: 60px 60px;
    animation: grid-flow 20s linear infinite;
  }

  @keyframes grid-flow {
    0% { background-position: 0px 0px; }
    100% { background-position: 60px 60px; }
  }

  /* 深色模式下的網格樣式 */
  .dark .bg-grid-pattern {
    background-image: 
      linear-gradient(rgba(59, 130, 246, 0.1) 1px, transparent 1px),
      linear-gradient(90deg, rgba(59, 130, 246, 0.1) 1px, transparent 1px);
  }

  /* 蘋果風格滾動條 */
  .apple-scrollbar {
    scrollbar-width: thin;
    scrollbar-color: rgba(0, 0, 0, 0.2) transparent;
  }

  .apple-scrollbar::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .apple-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }

  .apple-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(0, 0, 0, 0.2);
    border-radius: 6px;
  }

  .apple-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(0, 0, 0, 0.3);
  }

  .dark .apple-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
  }

  .dark .apple-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.3);
  }

  /* 選取文字效果 */
  ::selection {
    background: rgba(59, 130, 246, 0.2);
    color: inherit;
  }

  .dark ::selection {
    background: rgba(59, 130, 246, 0.4);
  }
}

:root {
  --foreground-rgb: 0, 0, 0;
  --background-start-rgb: 214, 219, 220;
  --background-end-rgb: 255, 255, 255;
}

body {
  color: rgb(var(--foreground-rgb));
  background: rgb(var(--background-rgb));
}

/* DatePicker 客製化樣式 */
.calendar-wrapper {
  @apply flex justify-center w-full;
}

.react-datepicker {
  @apply font-sans !border !border-gray-200 !rounded-xl !shadow-lg !bg-white !w-[320px] !p-4 !font-sans;
}

.react-datepicker__month-container {
  @apply !w-full;
}

.react-datepicker__header {
  @apply !bg-white !border-0 !p-0 !mb-4;
}

.react-datepicker__current-month {
  @apply !text-lg !text-gray-900 !font-semibold !mb-4;
}

.react-datepicker__day-names {
  @apply !mt-0 !mb-2;
}

.react-datepicker__day-name {
  @apply !text-gray-500 !text-sm !w-10 !h-10 !leading-10 !m-0;
}

.react-datepicker__month {
  @apply !m-0;
}

.react-datepicker__day {
  @apply !text-gray-700 !text-sm !w-10 !h-10 !leading-10 !m-0
         hover:!bg-primary/10 hover:!text-primary hover:!rounded-full
         !transition-all !duration-200 !ease-in-out;
}

.react-datepicker__day--selected {
  @apply !bg-primary !text-white !rounded-full
         hover:!bg-primary hover:!text-white;
}

.react-datepicker__day--disabled {
  @apply !text-gray-300 hover:!bg-transparent hover:!text-gray-300 !cursor-not-allowed;
}

.react-datepicker__day--today {
  @apply !font-bold !text-primary !bg-primary/10 !rounded-full;
}

.react-datepicker__day--keyboard-selected {
  @apply !bg-primary/20 !text-primary !rounded-full
         hover:!bg-primary hover:!text-white;
}

.react-datepicker__navigation {
  @apply !top-4;
}

.react-datepicker__navigation--previous {
  @apply !left-4;
}

.react-datepicker__navigation--next {
  @apply !right-4;
}

.react-datepicker__navigation-icon::before {
  @apply !border-gray-400 !transition-all !duration-200 !ease-in-out;
}

.react-datepicker__navigation:hover .react-datepicker__navigation-icon::before {
  @apply !border-primary;
}

/* 週末特殊樣式 */
.react-datepicker__day--weekend {
  @apply !text-red-500;
}

.react-datepicker__day--weekend.react-datepicker__day--disabled {
  @apply !text-red-200;
}

/* 相鄰月份的日期 */
.react-datepicker__day--outside-month {
  @apply !text-gray-300;
}

/* 移動設備觸摸優化 */
@media (hover: none) and (pointer: coarse) {
  /* 移除hover效果，防止在觸摸設備上出現問題 */
  button:hover {
    @apply bg-inherit;
  }
  
  /* 增加按鈕的點擊區域 - 但不影響小按鈕 */
  button:not([class*="min-h-"]) {
    @apply min-h-[44px] min-w-[44px];
  }
  
  /* 確保適當的觸摸反饋 */
  .touch-manipulation {
    touch-action: manipulation;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
  }
}

/* iOS Safari 特殊優化 */
@supports (-webkit-touch-callout: none) {
  /* 防止雙擊縮放 */
  input, textarea, select {
    font-size: 16px;
  }
  
  /* 防止觸摸時出現高亮 */
  * {
    -webkit-tap-highlight-color: transparent;
  }
  
  /* 確保彈窗在iOS上正確顯示 */
  .fixed {
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
  }
}

/* 防止觸摸時出現藍色高亮框 */
button, a, input, textarea, select {
  -webkit-tap-highlight-color: transparent;
  outline: none;
}

/* 確保按鈕有足夠的觸摸區域 */
@layer utilities {
  .touch-target {
    @apply min-h-[44px] min-w-[44px] flex items-center justify-center;
  }
}